<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Configuration of Partial CATEs — PCATE_cfg • tidyhte</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Configuration of Partial CATEs — PCATE_cfg"><meta property="og:description" content='PCATE_cfg is a configuration class for estimating marginal response surfaces based on heterogeneous
treatment effect estimates. "Partial" in this context is used similarly to the use in partial dependence plots
or in partial regression. In essence, a PCATE attempts to partial out the contribution to the CATE from all other
covariates. Two highly correlated variables may have very different PCATE surfaces.'><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-R58XC167ZD"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-R58XC167ZD');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyhte</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/methodological_details.html">Methodological details</a>
    </li>
    <li>
      <a href="../articles/experimental_analysis.html">Example experimental analysis</a>
    </li>
    <li>
      <a href="../articles/observational_analysis.html">Example observational analysis</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/ddimmery/tidyhte/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Configuration of Partial CATEs</h1>
    <small class="dont-index">Source: <a href="http://github.com/ddimmery/tidyhte/blob/HEAD/R/meta_cfg.R" class="external-link"><code>R/meta_cfg.R</code></a></small>
    <div class="hidden name"><code>PCATE_cfg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>PCATE_cfg</code> is a configuration class for estimating marginal response surfaces based on heterogeneous
treatment effect estimates. "Partial" in this context is used similarly to the use in partial dependence plots
or in partial regression. In essence, a PCATE attempts to partial out the contribution to the CATE from all other
covariates. Two highly correlated variables may have very different PCATE surfaces.</p>
    </div>


    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>cfgs</code></dt>
<dd><p>Named list of covariates names to a <code>Model_cfg</code> object defining
how to present that covariate's CATE surface.</p></dd>


<dt><code>model_covariates</code></dt>
<dd><p>A character vector of all the covariates to be included in the second-level
effect regression.</p></dd>


<dt><code>num_mc_samples</code></dt>
<dd><p>A named list from covariate name to the number of Monte Carlo samples to take to
calculate the double integral (See Details).</p></dd>


<dt><code>estimand</code></dt>
<dd><p>String indicating the estimand to target.</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-new"><code>PCATE_cfg$new()</code></a></p></li>
<li><p><a href="#method-add_moderator"><code>PCATE_cfg$add_moderator()</code></a></p></li>
<li><p><a href="#method-clone"><code>PCATE_cfg$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new <code>PCATE_cfg</code> object with specified model name and hyperparameters.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va"><a href="../reference/PCATE_cfg.html">PCATE_cfg</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">model_covariates</span>, <span class="va">cfgs</span>, num_mc_samples <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>model_covariates</code></dt>
<dd><p>A character vector of all the covariates to be included in the second-level
effect regression.</p></dd>


<dt><code>cfgs</code></dt>
<dd><p>Named list from moderator name to a <code>Model_cfg</code> object defining how to present
that covariate's CATE surface.</p></dd>


<dt><code>num_mc_samples</code></dt>
<dd><p>A named list from covariate name to the number of Monte Carlo samples to take to
calculate the double integral (See Details). If all covariates should use the same number of samples,
simply pass the (integer) number of samples.</p></dd>


<dt><code>effect_cfg</code></dt>
<dd><p>A <code>Model_cfg</code> object indicating how to fit the second level effect
regression (joint across all selected covariates).</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>A new <code>PCATE_cfg</code> object.</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span class="va"><a href="../reference/PCATE_cfg.html">PCATE_cfg</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
   cfgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="va"><a href="../reference/KernelSmooth_cfg.html">KernelSmooth_cfg</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>neval <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>,
   model_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span><span class="op">)</span>,
   num_mc_samples <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>
<span class="op">)</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-add_moderator"></a><div class="section">
<h3 id="method-add-moderator-">Method <code><a href="add_moderator.html">add_moderator()</a></code><a class="anchor" aria-label="anchor" href="#method-add-moderator-"></a></h3>
<p>Add a moderator to the <code>PCATE_cfg</code> object. This entails adding it to the joint
model of effects and defines a configuration for displaying the effect surface
for that moderator.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">PCATE_cfg</span><span class="op">$</span><span class="fu">add_moderator</span><span class="op">(</span><span class="va">var_name</span>, <span class="va">cfg</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>var_name</code></dt>
<dd><p>The name of the moderator to add (and the name of the column in
the dataset).</p></dd>


<dt><code>cfg</code></dt>
<dd><p>A <code>Model_cfg</code> defining how to display the selected moderator's effect
surface.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">PCATE_cfg</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"><span class="co">## Method `PCATE_cfg$new`</span></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">PCATE_cfg</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span class="r-in">   cfgs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="va"><a href="KernelSmooth_cfg.html">KernelSmooth_cfg</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>neval <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">   model_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x1"</span>, <span class="st">"x2"</span>, <span class="st">"x3"</span><span class="op">)</span>,</span>
<span class="r-in">   num_mc_samples <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x1 <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;PCATE_cfg&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Public:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     add_moderator: function (var_name, cfg) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     cfgs: list</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     clone: function (deep = FALSE) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     estimand: PCATE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     initialize: function (model_covariates, cfgs, num_mc_samples = 100) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     model_covariates: x1 x2 x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     num_mc_samples: list</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Drew Dimmery.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

